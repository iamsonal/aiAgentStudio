<?xml version="1.0" encoding="UTF-8"?>
<CustomMetadata xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <label>SendEmail</label>
    <protected>false</protected>
    <values>
        <field>Description__c</field>
        <value xsi:type="xsd:string">Sends transactional emails via Salesforce</value>
    </values>
    <values>
        <field>HandlerClassName__c</field>
        <value xsi:type="xsd:string">ActionSendEmail</value>
    </values>
    <values>
        <field>IsActive__c</field>
        <value xsi:type="xsd:boolean">true</value>
    </values>
    <values>
        <field>RequiresSObject__c</field>
        <value xsi:type="xsd:boolean">false</value>
    </values>
    <values>
        <field>RequiredBackendProperties__c</field>
        <value xsi:type="xsd:string">defaultFromName,defaultReplyTo</value>
    </values>
    <values>
        <field>RequiredParameters__c</field>
        <value xsi:type="xsd:string">toAddresses,subject</value>
    </values>
    <values>
        <field>GuidanceText__c</field>
        <value xsi:type="xsd:string">&lt;h3&gt;ðŸ“§ SendEmail Action&lt;/h3&gt;
&lt;p&gt;This action sends transactional emails through Salesforce&apos;s Email API.&lt;/p&gt;

&lt;h4&gt;Backend Configuration&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;defaultFromName&lt;/strong&gt; (String): Default sender display name (required)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;defaultReplyTo&lt;/strong&gt; (String): Default reply-to email address (required)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;maxRecipients&lt;/strong&gt; (Number): Maximum recipients per email (default: 100)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;maxAttachments&lt;/strong&gt; (Number): Maximum attachments (default: 10)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;requireApproval&lt;/strong&gt; (Boolean): Require human approval before sending&lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;Parameters (AI will provide)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;toAddresses&lt;/strong&gt; (Array&amp;lt;Email&amp;gt;): Recipient email addresses (required)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;subject&lt;/strong&gt; (String): Email subject line (required)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;body&lt;/strong&gt; or &lt;strong&gt;htmlBody&lt;/strong&gt; (String): Email body content&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ccAddresses&lt;/strong&gt; (Array&amp;lt;Email&amp;gt;): CC recipients (optional)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;bccAddresses&lt;/strong&gt; (Array&amp;lt;Email&amp;gt;): BCC recipients (optional)&lt;/li&gt;
&lt;/ul&gt;</value>
    </values>
    <values>
        <field>ParametersTemplate__c</field>
        <value xsi:type="xsd:string">{
  "type": "object",
  "properties": {
    "toAddresses": {
      "type": "array",
      "description": "List of recipient email addresses (required).",
      "items": { "type": "string", "format": "email" }
    },
    "subject": {
      "type": "string",
      "description": "Email subject line (required)."
    },
    "body": {
      "type": "string",
      "description": "Plain text email body."
    },
    "htmlBody": {
      "type": "string",
      "description": "Optional HTML email body."
    },
    "plainTextBody": {
      "type": "string",
      "description": "Optional plain text email body."
    },
    "ccAddresses": {
      "type": "array",
      "description": "Optional CC recipients.",
      "items": { "type": "string", "format": "email" }
    },
    "bccAddresses": {
      "type": "array",
      "description": "Optional BCC recipients.",
      "items": { "type": "string", "format": "email" }
    },
    "fromName": {
      "type": "string",
      "description": "Optional sender display name."
    },
    "replyTo": {
      "type": "string",
      "format": "email",
      "description": "Optional reply-to address."
    },
    "templateId": {
      "type": "string",
      "format": "salesforce-id",
      "description": "Optional Email Template ID."
    },
    "whatId": {
      "type": "string",
      "format": "salesforce-id",
      "description": "Optional related record ID for activity tracking."
    },
    "targetObjectId": {
      "type": "string",
      "format": "salesforce-id",
      "description": "Optional Contact/User ID for template merge fields."
    },
    "saveAsActivity": {
      "type": "boolean",
      "description": "Optional. Save email as activity. Defaults to false."
    },
    "useSignature": {
      "type": "boolean",
      "description": "Optional. Include sender's signature. Defaults to false."
    },
    "treatBodiesAsTemplate": {
      "type": "boolean",
      "description": "Optional. Process merge fields in body. Defaults to false."
    }
  },
  "required": ["toAddresses", "subject"]
}</value>
    </values>
    <values>
        <field>BackendConfigTemplate__c</field>
        <value xsi:type="xsd:string">{
  "defaultFromName": "",
  "defaultReplyTo": "",
  "maxRecipients": 100,
  "maxAttachments": 10,
  "requireApproval": false
}</value>
    </values>
</CustomMetadata>
